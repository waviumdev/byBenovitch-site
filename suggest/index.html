<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Suggest a track — By Benovitch</title>
  <meta name="description" content="Suggest a track for Benovitch playlists." />
  <meta name="robots" content="index,follow" />

    <link rel="stylesheet" href="assets/css/main.css">
</head>

 

<body>
<header>
  <div class="wrap nav">
    <a class="brand" href="/">By Benovitch <small>Music Business</small></a>
    <nav class="menu">
      <a href="/services">Services</a>
      <a href="/pls">PLS</a>
      <a href="/contact">Contact</a>
    </nav>
  </div>
</header>

<main>
  <div class="wrap">
    <h1>Suggest a track</h1>
    <p class="lead">
      <strong>Submit a track suggestion for my Spotify playlists.</strong><br />
      Please send a Spotify link + a short message. If it fits, I’ll consider it for PLS.
    </p>
    <div class="pill">No embeds — links only</div>

    <div class="card">
      <!--
        ACTION À CONFIGURER :
        - Formspree : action="https://formspree.io/f/xxxxxxx"
        - Netlify Forms : ajouter netlify + name
        - API perso : endpoint POST

        La redirection vers /suggest/thanks.html est gérée par le JS en bas
        (ça marche si tu utilises un endpoint CORS-friendly ; sinon tu peux mettre la redirection côté service).
      -->
      <form id="suggestForm" method="post" action="#">
        <div class="row">
          <div>
            <label for="artist">Artist name</label>
            <input id="artist" name="artist" required />
          </div>
          <div>
            <label for="email">Email (optional)</label>
            <input id="email" name="email" type="email" />
          </div>
        </div>

        <div>
          <label for="spotify">Spotify track link</label>
          <input id="spotify" name="spotify" placeholder="https://open.spotify.com/track/..." required />
        </div>

        <div class="row">
          <div>
            <label for="playlist">Target playlist (optional)</label>
            <select id="playlist" name="playlist">
              <option value="">— Select —</option>
              <option>PLS Playlist 01</option>
              <option>PLS Playlist 02</option>
              <option>PLS Playlist 03</option>
              <option>PLS Playlist 04</option>
              <option>PLS Playlist 05</option>
              <option>PLS Playlist 06</option>
              <option>PLS Playlist 07</option>
              <option>PLS Playlist 08</option>
              <option>PLS Playlist 09</option>
              <option>PLS Playlist 10</option>
              <option>PLS Playlist 11</option>
              <option>PLS Playlist 12</option>
            </select>
          </div>
          <div>
            <label for="release">Release date (optional)</label>
            <input id="release" name="release" placeholder="YYYY-MM-DD" />
          </div>
        </div>

        <div>
          <label for="message">Short message</label>
          <textarea id="message" name="message" placeholder="Genre, vibe, why it fits the playlist, etc."></textarea>
        </div>

        <!-- Honeypot anti-spam -->
        <div style="position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden" aria-hidden="true">
          <label for="company">Company</label>
          <input id="company" name="company" tabindex="-1" autocomplete="off" />
        </div>

        <button class="btn" type="submit">Send suggestion</button>

        <p class="hint">
          Tip: use the exact Spotify track link (not an album link) for faster review.
        </p>
      </form>
    </div>
  </div>
</main>

<footer>
  <div class="wrap">
    <strong style="color:#fff">By Benovitch</strong><br />
    © <span id="year"></span> — All rights reserved.
    <div class="footerLinks">
      <a href="/legal/privacy.html">Privacy</a>
      <a href="/contact">Contact</a>
    </div>
  </div>
</footer>

<script>
  document.getElementById("year").textContent = new Date().getFullYear();

  // Option UX : rediriger vers /suggest/thanks.html
  // Si ton endpoint ne supporte pas fetch/CORS, enlève ce script et utilise une redirection côté service.
  const form = document.getElementById("suggestForm");
  form.addEventListener("submit", async (e) => {
    // Si action="#", on laisse pas faire (sinon page reload sans envoi).
    if (form.getAttribute("action") === "#") {
      e.preventDefault();
      window.location.href = "/suggest/thanks.html";
      return;
    }

    // Si action est configuré, on tente un envoi fetch pour pouvoir redirect.
    // Si fetch échoue (CORS), on laisse le navigateur soumettre normalement.
    try {
      e.preventDefault();
      const res = await fetch(form.action, {
        method: form.method.toUpperCase(),
        body: new FormData(form),
        headers: { "Accept": "application/json" }
      });
      if (res.ok) window.location.href = "/suggest/thanks.html";
      else form.submit();
    } catch {
      // fallback classique
      form.submit();
    }
  });
</script>
  
    <script>
  (function () {
    // Ne s'exécute que sur GitHub Pages
    if (!location.hostname.endsWith("github.io")) return;

    const parts = location.pathname.split("/").filter(Boolean);
    if (parts.length === 0) return;

    const repo = parts[0];        // byBenovitch-site
    const base = "/" + repo;

    // Corrige les liens <a href="/...">
    document.querySelectorAll('a[href^="/"]').forEach(link => {
      const href = link.getAttribute("href");
      if (!href.startsWith(base + "/")) {
        link.setAttribute("href", base + href);
      }
    });

    // Corrige aussi les formulaires si besoin
    document.querySelectorAll('form[action^="/"]').forEach(form => {
      const action = form.getAttribute("action");
      if (!action.startsWith(base + "/")) {
        form.setAttribute("action", base + action);
      }
    });
  })();
</script>

</body>
</html>
